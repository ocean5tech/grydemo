# ğŸ”§ GRY Demo - æ‰‹å·¥éƒ¨ç½²è¯¦ç»†è¯´æ˜

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux / macOS / Windows (WSL)
- **Node.js**: >= 16.0 (æ¨è 18.x æˆ–æ›´é«˜)
- **å†…å­˜**: >= 2GB å¯ç”¨å†…å­˜
- **ç£ç›˜**: >= 1GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç«¯å£ 3000, 3001, 8080, 8081 å¯ç”¨

### å¯é€‰ä¾èµ– (å®Œæ•´Spring Bootç‰ˆæœ¬)
- **Java**: >= 11 (OpenJDK æˆ– Oracle JDK)
- **Maven**: >= 3.6
- **Docker**: >= 20.x (å®¹å™¨åŒ–éƒ¨ç½²)

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½² (æ¨èæ–¹å¼)

### 1. ä¸€é”®è‡ªåŠ¨éƒ¨ç½²
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /home/wyatt/dev-projects/gry_demo

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x deploy.sh

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
./deploy.sh

# æˆ–è€…ä½¿ç”¨å®Œæ•´å‘½ä»¤
./deploy.sh deploy
```

### 2. éªŒè¯éƒ¨ç½²ç»“æœ
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./deploy.sh status

# æŸ¥çœ‹è¿è¡Œæ—¥å¿—
./deploy.sh logs

# æ‰§è¡Œå¥åº·æ£€æŸ¥
./deploy.sh health
```

### 3. æœåŠ¡ç®¡ç†å‘½ä»¤
```bash
./deploy.sh start    # å¯åŠ¨æœåŠ¡
./deploy.sh stop     # åœæ­¢æœåŠ¡
./deploy.sh restart  # é‡å¯æœåŠ¡
./deploy.sh help     # æŸ¥çœ‹å¸®åŠ©
```

---

## ğŸ”§ æ‰‹å·¥åˆ†æ­¥éƒ¨ç½²

å¦‚æœä¸€é”®éƒ¨ç½²é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ‰‹å·¥éƒ¨ç½²ï¼š

### æ­¥éª¤1: ç¯å¢ƒæ£€æŸ¥

```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version
# è¾“å‡ºåº”è¯¥æ˜¯ v16.0 æˆ–æ›´é«˜

# æ£€æŸ¥npmç‰ˆæœ¬
npm --version

# æ£€æŸ¥ç«¯å£å ç”¨
ss -tuln | grep -E ":(8080|8081|3000|3001) "
# åº”è¯¥æ²¡æœ‰è¾“å‡ºï¼Œè¡¨ç¤ºç«¯å£æœªè¢«å ç”¨

# å¦‚æœç«¯å£è¢«å ç”¨ï¼Œé‡Šæ”¾ç«¯å£
sudo lsof -ti:8080 | xargs kill -9  # é‡Šæ”¾8080ç«¯å£
sudo lsof -ti:8081 | xargs kill -9  # é‡Šæ”¾8081ç«¯å£
sudo lsof -ti:3000 | xargs kill -9  # é‡Šæ”¾3000ç«¯å£
sudo lsof -ti:3001 | xargs kill -9  # é‡Šæ”¾3001ç«¯å£
```

### æ­¥éª¤2: åˆ›å»ºè¿è¡Œç›®å½•

```bash
# è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
cd /home/wyatt/dev-projects/gry_demo

# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p logs

# åˆ›å»ºè¿›ç¨‹IDç›®å½•
mkdir -p pids

# æ£€æŸ¥å¿…è¦æ–‡ä»¶å­˜åœ¨
ls -la *.js *.html
# åº”è¯¥çœ‹åˆ°: test-server.js, kafka-demo-server.js, frontend-server.js, kafka-frontend-server.js
# ä»¥åŠ: frontend-test.html, kafka-demo.html
```

### æ­¥éª¤3: æ‰‹å·¥å¯åŠ¨å„æœåŠ¡

#### 3.1 å¯åŠ¨åç«¯APIæœåŠ¡ (ç«¯å£8080)
```bash
# å¯åŠ¨æœåŠ¡
nohup node test-server.js > logs/backend-api.log 2>&1 &

# è®°å½•è¿›ç¨‹ID
echo $! > pids/backend-api.pid

# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 3

# éªŒè¯æœåŠ¡
curl -s http://localhost:8080/api/users
# åº”è¯¥è¿”å›ç”¨æˆ·æ•°æ®JSON
```

#### 3.2 å¯åŠ¨Kafkaæ¼”ç¤ºæœåŠ¡ (ç«¯å£8081)
```bash
# å¯åŠ¨æœåŠ¡
nohup node kafka-demo-server.js > logs/kafka-backend.log 2>&1 &

# è®°å½•è¿›ç¨‹ID
echo $! > pids/kafka-backend.pid

# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 3

# éªŒè¯æœåŠ¡
curl -s http://localhost:8081/api/kafka/status
# åº”è¯¥è¿”å›KafkaçŠ¶æ€ä¿¡æ¯
```

#### 3.3 å¯åŠ¨å‰ç«¯æµ‹è¯•æœåŠ¡ (ç«¯å£3000)
```bash
# å¯åŠ¨æœåŠ¡
nohup node frontend-server.js > logs/frontend.log 2>&1 &

# è®°å½•è¿›ç¨‹ID
echo $! > pids/frontend.pid

# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 2

# éªŒè¯æœåŠ¡
curl -s http://localhost:3000 | grep "GRY Demo"
# åº”è¯¥è¿”å›åŒ…å«"GRY Demo"çš„HTMLå†…å®¹
```

#### 3.4 å¯åŠ¨Kafkaæ¼”ç¤ºå‰ç«¯ (ç«¯å£3001)
```bash
# å¯åŠ¨æœåŠ¡
nohup node kafka-frontend-server.js > logs/kafka-frontend.log 2>&1 &

# è®°å½•è¿›ç¨‹ID
echo $! > pids/kafka-frontend.pid

# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 2

# éªŒè¯æœåŠ¡
curl -s http://localhost:3001 | grep "Kafka"
# åº”è¯¥è¿”å›åŒ…å«"Kafka"çš„HTMLå†…å®¹
```

### æ­¥éª¤4: æœåŠ¡çŠ¶æ€æ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰è¿›ç¨‹æ˜¯å¦è¿è¡Œ
ps aux | grep -E "(test-server|kafka-demo-server|frontend-server|kafka-frontend-server)" | grep -v grep

# æ£€æŸ¥ç«¯å£ç›‘å¬çŠ¶æ€
ss -tuln | grep -E ":(8080|8081|3000|3001) "
# åº”è¯¥çœ‹åˆ°4ä¸ªç«¯å£éƒ½åœ¨ç›‘å¬

# æ£€æŸ¥è¿›ç¨‹IDæ–‡ä»¶
ls -la pids/
cat pids/*.pid
```

### æ­¥éª¤5: åŠŸèƒ½éªŒè¯æµ‹è¯•

```bash
# æµ‹è¯•åç«¯API
echo "æµ‹è¯•åç«¯API..."
curl -s http://localhost:8080/api/users | head -5

echo "æµ‹è¯•äº§å“API..."
curl -s -X POST http://localhost:8080/api/products \
  -H "Content-Type: application/json" \
  -d '{"name":"æµ‹è¯•äº§å“","price":99.99,"description":"æ‰‹å·¥éƒ¨ç½²æµ‹è¯•"}'

# æµ‹è¯•KafkaåŠŸèƒ½
echo "æµ‹è¯•KafkaæœåŠ¡..."
curl -s http://localhost:8081/api/kafka/status

echo "åˆ›å»ºè®¢å•è§¦å‘Kafkaäº‹ä»¶..."
curl -s -X POST http://localhost:8081/api/orders \
  -H "Content-Type: application/json" \
  -d '{"userId":1,"items":[{"productId":1,"quantity":2}]}'

# æ£€æŸ¥Kafkaæ¶ˆæ¯
curl -s http://localhost:8081/api/kafka/messages | tail -10
```

---

## ğŸ“± è®¿é—®éªŒè¯

### æµè§ˆå™¨è®¿é—®æµ‹è¯•

1. **åŸºç¡€APIæµ‹è¯•é¡µé¢**
   ```
   URL: http://localhost:3000
   åŠŸèƒ½: æµ‹è¯•5ä¸ªæ ¸å¿ƒAPIæ¥å£
   éªŒè¯: é¡µé¢åŠ è½½æ­£å¸¸ï¼ŒAPIæŒ‰é’®å¯ç‚¹å‡»
   ```

2. **Kafkaå¼‚æ­¥æ¼”ç¤ºé¡µé¢** â­ **é‡ç‚¹æ¨è**
   ```
   URL: http://localhost:3001
   åŠŸèƒ½: Kafkaæ¶ˆæ¯æµå¯è§†åŒ–æ¼”ç¤º
   éªŒè¯: å®æ—¶æ¶ˆæ¯ç›‘æ§ï¼Œäº‹ä»¶è§¦å‘æ­£å¸¸
   ```

3. **åç«¯APIç›´æ¥è®¿é—®**
   ```
   URL: http://localhost:8080/api/users
   åŠŸèƒ½: ç›´æ¥æµ‹è¯•APIå“åº”
   éªŒè¯: è¿”å›JSONæ ¼å¼ç”¨æˆ·æ•°æ®
   ```

4. **KafkaæœåŠ¡çŠ¶æ€**
   ```
   URL: http://localhost:8081/api/kafka/status
   åŠŸèƒ½: æŸ¥çœ‹Kafkaé›†ç¾¤çŠ¶æ€
   éªŒè¯: è¿”å›Topicå’ŒConsumerä¿¡æ¯
   ```

### å‘½ä»¤è¡ŒåŠŸèƒ½æµ‹è¯•

```bash
# å®Œæ•´APIæµ‹è¯•è„šæœ¬
echo "=== å¼€å§‹å®Œæ•´åŠŸèƒ½æµ‹è¯• ==="

# 1. è·å–ç”¨æˆ·åˆ—è¡¨
echo "1. æµ‹è¯•ç”¨æˆ·API..."
curl -s http://localhost:8080/api/users | jq '.[0]'

# 2. åˆ›å»ºäº§å“
echo "2. æµ‹è¯•äº§å“åˆ›å»º..."
PRODUCT_ID=$(curl -s -X POST http://localhost:8080/api/products \
  -H "Content-Type: application/json" \
  -d '{"name":"æ‰‹å·¥æµ‹è¯•äº§å“","price":199.99,"description":"æ‰‹å·¥éƒ¨ç½²éªŒè¯äº§å“"}' | jq '.id')

# 3. æ›´æ–°äº§å“
echo "3. æµ‹è¯•äº§å“æ›´æ–°..."
curl -s -X PUT http://localhost:8080/api/products/$PRODUCT_ID \
  -H "Content-Type: application/json" \
  -d '{"name":"æ›´æ–°çš„äº§å“","price":299.99,"description":"å·²æ›´æ–°çš„äº§å“ä¿¡æ¯"}'

# 4. åˆ›å»ºè®¢å•(è§¦å‘Kafka)
echo "4. æµ‹è¯•è®¢å•åˆ›å»º(Kafkaäº‹ä»¶)..."
ORDER_ID=$(curl -s -X POST http://localhost:8081/api/orders \
  -H "Content-Type: application/json" \
  -d '{"userId":1,"items":[{"productId":'$PRODUCT_ID',"quantity":3}]}' | jq '.id')

# 5. å¤šè¡¨å…³è”æŸ¥è¯¢
echo "5. æµ‹è¯•å¤šè¡¨å…³è”æŸ¥è¯¢..."
curl -s http://localhost:8080/api/orders/user/1 | jq '.[0]'

# 6. æŸ¥çœ‹Kafkaæ¶ˆæ¯
echo "6. æŸ¥çœ‹Kafkaæ¶ˆæ¯æµ..."
curl -s http://localhost:8081/api/kafka/messages | jq '.[-3:]'

echo "=== åŠŸèƒ½æµ‹è¯•å®Œæˆ ==="
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. ç«¯å£è¢«å ç”¨
**ç—‡çŠ¶**: æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œæç¤ºç«¯å£å·²è¢«ä½¿ç”¨
```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
sudo lsof -i :8080
sudo lsof -i :3000

# ç»ˆæ­¢å ç”¨è¿›ç¨‹
sudo kill -9 <PID>

# æˆ–è€…æ‰¹é‡ç»ˆæ­¢
sudo pkill -f "test-server.js"
sudo pkill -f "frontend-server.js"
```

#### 2. Node.jsç‰ˆæœ¬è¿‡ä½
**ç—‡çŠ¶**: æœåŠ¡å¯åŠ¨æ—¶å‡ºç°è¯­æ³•é”™è¯¯
```bash
# æ£€æŸ¥ç‰ˆæœ¬
node --version

# å‡çº§Node.js (Ubuntu/Debian)
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# å‡çº§Node.js (CentOS/RHEL)
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs
```

#### 3. æœåŠ¡å¯åŠ¨ä½†æ— å“åº”
**ç—‡çŠ¶**: ç«¯å£ç›‘å¬ä½†curlè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æœåŠ¡æ—¥å¿—
tail -f logs/backend-api.log
tail -f logs/kafka-backend.log

# é‡å¯æœåŠ¡
./deploy.sh restart

# æˆ–æ‰‹å·¥é‡å¯
kill $(cat pids/backend-api.pid)
nohup node test-server.js > logs/backend-api.log 2>&1 &
echo $! > pids/backend-api.pid
```

#### 4. æƒé™é—®é¢˜
**ç—‡çŠ¶**: æ— æ³•åˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•
```bash
# æ£€æŸ¥ç›®å½•æƒé™
ls -la /home/wyatt/dev-projects/gry_demo

# ä¿®æ”¹æƒé™
chmod -R 755 /home/wyatt/dev-projects/gry_demo
chown -R $USER:$USER /home/wyatt/dev-projects/gry_demo
```

#### 5. å†…å­˜ä¸è¶³
**ç—‡çŠ¶**: æœåŠ¡å¯åŠ¨åè‡ªåŠ¨é€€å‡º
```bash
# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h

# æ£€æŸ¥æœåŠ¡å†…å­˜å ç”¨
ps aux --sort=-%mem | head -10

# å¦‚æœå†…å­˜ä¸è¶³ï¼Œå…³é—­å…¶ä»–æœåŠ¡æˆ–å¢åŠ è™šæ‹Ÿå†…å­˜
```

---

## ğŸ§ª éªŒè¯éƒ¨ç½²æˆåŠŸ

### å®Œæ•´éªŒè¯æ£€æŸ¥æ¸…å•

- [ ] **ç¯å¢ƒæ£€æŸ¥é€šè¿‡**: Node.js >= 16.0, ç«¯å£å¯ç”¨
- [ ] **4ä¸ªæœåŠ¡å¯åŠ¨**: 8080, 8081, 3000, 3001ç«¯å£ç›‘å¬
- [ ] **åŸºç¡€APIå·¥ä½œ**: http://localhost:8080/api/users è¿”å›æ•°æ®
- [ ] **KafkaæœåŠ¡å·¥ä½œ**: http://localhost:8081/api/kafka/status è¿”å›çŠ¶æ€
- [ ] **å‰ç«¯é¡µé¢åŠ è½½**: http://localhost:3000 æ˜¾ç¤ºæµ‹è¯•ç•Œé¢
- [ ] **Kafkaæ¼”ç¤ºé¡µé¢**: http://localhost:3001 æ˜¾ç¤ºç›‘æ§ç•Œé¢
- [ ] **APIåŠŸèƒ½æµ‹è¯•**: 5ä¸ªæ ¸å¿ƒAPIå‡å¯æ­£å¸¸è°ƒç”¨
- [ ] **Kafkaäº‹ä»¶è§¦å‘**: åˆ›å»ºè®¢å•å¯è§¦å‘å¼‚æ­¥æ¶ˆæ¯å¤„ç†
- [ ] **å¤šè¡¨æŸ¥è¯¢å·¥ä½œ**: ç”¨æˆ·è®¢å•å…³è”æŸ¥è¯¢è¿”å›æ­£ç¡®æ•°æ®
- [ ] **æ—¥å¿—è®°å½•æ­£å¸¸**: logsç›®å½•ä¸‹æœ‰å¯¹åº”çš„æ—¥å¿—æ–‡ä»¶

### éªŒè¯å‘½ä»¤æ±‡æ€»

```bash
# ä¸€é”®éªŒè¯è„šæœ¬
echo "=== GRY Demo éƒ¨ç½²éªŒè¯ ==="

# æ£€æŸ¥è¿›ç¨‹
echo "æ£€æŸ¥æœåŠ¡è¿›ç¨‹..."
ps aux | grep -E "(test-server|kafka-demo-server|frontend-server)" | grep -v grep

# æ£€æŸ¥ç«¯å£
echo "æ£€æŸ¥ç«¯å£ç›‘å¬..."
ss -tuln | grep -E ":(8080|8081|3000|3001) "

# å¿«é€ŸAPIæµ‹è¯•
echo "å¿«é€ŸAPIæµ‹è¯•..."
curl -s http://localhost:8080/api/users > /dev/null && echo "âœ… åç«¯APIæ­£å¸¸" || echo "âŒ åç«¯APIå¼‚å¸¸"
curl -s http://localhost:8081/api/kafka/status > /dev/null && echo "âœ… KafkaæœåŠ¡æ­£å¸¸" || echo "âŒ KafkaæœåŠ¡å¼‚å¸¸"
curl -s http://localhost:3000 > /dev/null && echo "âœ… å‰ç«¯æœåŠ¡æ­£å¸¸" || echo "âŒ å‰ç«¯æœåŠ¡å¼‚å¸¸"
curl -s http://localhost:3001 > /dev/null && echo "âœ… Kafkaå‰ç«¯æ­£å¸¸" || echo "âŒ Kafkaå‰ç«¯å¼‚å¸¸"

echo "=== éªŒè¯å®Œæˆ ==="
echo "æ¨èè®¿é—®: http://localhost:3001 ä½“éªŒKafkaå¼‚æ­¥å¤„ç†åŠŸèƒ½"
```

---

## ğŸ“š ä¸‹ä¸€æ­¥æ“ä½œ

éƒ¨ç½²æˆåŠŸåï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºä½“éªŒç³»ç»ŸåŠŸèƒ½ï¼š

1. **è®¿é—® http://localhost:3001** - ä½“éªŒKafkaå¼‚æ­¥å¤„ç†æ¼”ç¤º
2. **è®¿é—® http://localhost:3000** - æµ‹è¯•åŸºç¡€APIåŠŸèƒ½
3. **æŸ¥çœ‹ `éœ€æ±‚å®ç°å¯¹åº”è¯´æ˜.md`** - äº†è§£ä»£ç ä¸éœ€æ±‚çš„å¯¹åº”å…³ç³»
4. **è¿è¡Œ `./deploy.sh logs`** - æŸ¥çœ‹å®æ—¶è¿è¡Œæ—¥å¿—
5. **æµ‹è¯•APIæ¥å£** - ä½¿ç”¨Postmanæˆ–curlæµ‹è¯•å®Œæ•´API

**æ‰‹å·¥éƒ¨ç½²å®Œæˆï¼å¼€å§‹ä½“éªŒæ‚¨çš„å…¨æ ˆåº”ç”¨å§ï¼** ğŸ‰